import{M as _}from"./MyInput.8bae33cd.js";import{_ as k}from"./Admin.e0746f2f.js";import{a2 as V,p as j,H as l,r as A,o as B,c as C,b as r,u as a,w as y,F as I,a6 as S,a as o,e as D,t as M,Q as L}from"./app.02386b88.js";import{d as N}from"./debounce.8d18204c.js";import{p as z}from"./pickBy.1c63e4aa.js";import{V as c}from"./vue3-apexcharts.common.046dcab4.js";import{_ as E}from"./SharedState.4381a2a5.js";import"./_plugin-vue_export-helper.cdc0426e.js";const H="/build/assets/Play_Store.a6413011.svg",P="/build/assets/pwa.75bcfc50.png",F={class:"flex justify-between px-4 mt-4 sm:px-8"},R={class:"text-xl text-gray-600"},U=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})],-1),X={class:"flex items-center gap-2 py-6 ml-12"},$={class:"pt-6"},Q=o("div",{class:"flex justify-end flex-1 w-full gap-4 mr-8 fade-in"},[o("a",{href:"https://waste.mecc.gov.mn/waste.apk",target:"_blank"},[o("img",{src:H,class:"h-12 bounce-top-icons"})]),o("a",{href:"https://waste.mecc.gov.mn/mobile",target:"_blank"},[o("img",{src:P,class:"h-12 bounce-top-icons"})])],-1),T={class:"grid grid-cols-1 gap-4 px-4 mt-8 sm:grid-cols-3 sm:px-8"},W={class:"px-4 py-2 bg-white border rounded-md shadow"},q=o("h3",{class:"mb-4 text-xl text-gray-600"},"\u041D\u0438\u0439\u0442 \u0437\u04E9\u0440\u0447\u0438\u043B \u0442\u04E9\u043B\u04E9\u0432",-1),G={class:"col-span-2 px-4 py-2 bg-white border rounded-md shadow"},J=o("h3",{class:"mb-4 text-xl text-gray-600"},"\u0417\u04E9\u0440\u0447\u043B\u0438\u0439\u043D \u0442\u04E9\u0440\u043B\u04E9\u04E9\u0440",-1),K={class:"grid grid-cols-1 gap-4 px-4 mt-8 sm:grid-cols-3 sm:px-8"},Y={class:"col-span-2 px-4 py-2 bg-white border rounded-md shadow"},Z=o("h3",{class:"mb-4 text-xl text-gray-600"},"\u0425\u0430\u0440\u044C\u044F\u0430\u043B\u0430\u0433\u0434\u0430\u0445 \u043D\u0443\u0442\u0430\u0433 \u0434\u044D\u0432\u0441\u0433\u044D\u0440\u044D\u044D\u0440",-1),tt={class:"px-4 py-2 bg-white border rounded-md shadow"},et=o("h3",{class:"mb-4 text-xl text-gray-600"},"\u0417\u04E9\u0440\u0447\u0438\u043B \u0445\u0443\u0432\u0430\u0430\u0440\u0438\u043B\u0430\u043B\u0442\u0430\u0430\u0440",-1),st={class:"grid grid-cols-2"},ot={class:"px-4 py-2 mx-4 mt-8 bg-white border rounded-md shadow sm:mx-8"},at=o("h3",{class:"mb-4 text-xl text-gray-600"},"\u041E\u043B\u043E\u043D \u0437\u04E9\u0440\u0447\u0438\u043B \u0433\u0430\u0440\u0433\u0430\u0441\u0430\u043D \u0430\u0436 \u0430\u0445\u0443\u0439\u043D \u043D\u044D\u0433\u0436\u04AF\u04AF\u0434",-1),rt={class:"px-4 py-2 mx-4 mt-8 bg-white border rounded-md shadow sm:mx-8"},it=o("h3",{class:"mb-4 text-xl text-gray-600"},"\u041E\u043B\u043E\u043D \u0437\u04E9\u0440\u0447\u0438\u043B \u0433\u0430\u0440\u0433\u0430\u0441\u0430\u043D \u0438\u0440\u0433\u044D\u0434",-1),mt={__name:"Dashboard",props:{datas:Object,chart:[Array],etgeed:[Array],irgen:[Array],filters:[Object,Array],host:String},setup(w){const i=w;let d=V({...i.filters});j(()=>d,N(function(){L.Inertia.get("/dashboard",z(d),{preserveState:!0})},150),{deep:!0});const u=l(()=>{const s=i.chart.reduce((t,e)=>(t.includes(e.ognoo)||t.push(e.ognoo),t),[]);return{series:i.chart.reduce(function(t,e){let n=t.findIndex(p=>p.name==e.reason);if(n<0){let p={name:e.reason,data:s.map(O=>({x:O,y:0}))};n=t.length,t.push(p)}let h=t[n].data.findIndex(p=>p.x==e.ognoo);return h<0?t[n].data.push({x:e.ognoo,y:e.niit}):t[n].data[h].y=t[n].data[h].y+e.niit,t},[]),chartOptions:{chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{},yaxis:{title:{text:"\u041D\u0438\u0439\u0442"}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return"\u041D\u0438\u0439\u0442: "+t}}}}}}),b=l(()=>{const s=i.chart.reduce(function(t,e){return t[e.region]=t[e.region]||0,t[e.region]=t[e.region]+e.niit,t},{});return{chartOptions:{xaxis:{categories:Object.keys(s)}},series:[{name:"series-1",data:Object.values(s)}]}}),m=l(()=>{const s=i.chart.reduce(function(t,e){return t[e.org]=t[e.org]||0,t[e.org]=t[e.org]+e.niit,t},{});return{series:Object.values(s),chartOptions:{chart:{type:"donut"},labels:Object.keys(s),legend:{position:"top"}}}}),g=l(()=>{const s=i.chart.reduce(function(t,e){return t[e.stat]=t[e.stat]||0,t[e.stat]=t[e.stat]+e.niit,t},{});return{series:Object.values(s),chartOptions:{chart:{type:"donut"},labels:Object.keys(s),plotOptions:{legend:{position:"top"}},responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"left"}}}],legend:{position:"top"}}}}),f=l(()=>({chartOptions:{chart:{type:"bar"},xaxis:{categories:i.etgeed.map(s=>s.name)},yaxis:{labels:{show:!1}},plotOptions:{bar:{borderRadius:4,distributed:!0,horizontal:!0}},dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(s,t){return t.w.globals.labels[t.dataPointIndex]+":  "+s},offsetX:0,dropShadow:{enabled:!0}},colors:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B","#2b908f","#f9a3a4","#90ee7e","#f48024","#69d2e7"]},series:[{data:i.etgeed.map(s=>s.niit)}]})),x=l(()=>({chartOptions:{chart:{type:"bar"},xaxis:{categories:i.irgen.map(s=>s.name)},yaxis:{labels:{show:!1}},plotOptions:{bar:{borderRadius:4,distributed:!0,horizontal:!0}},dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(s,t){return t.w.globals.labels[t.dataPointIndex]+":  "+s},offsetX:0,dropShadow:{enabled:!0}},colors:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B","#2b908f","#f9a3a4","#90ee7e","#f48024","#69d2e7"]},series:[{data:i.irgen.map(s=>s.niit)}]})),v=l(()=>{let s=Date.parse(d.end)-Date.parse(d.start);return(isNaN(s)?"~":Math.ceil(s/(1e3*3600*24)))+" \u04E9\u0434\u0440\u0438\u0439\u043D \u043C\u044D\u0434\u044D\u044D"});return(s,t)=>{const e=A("inertia-link");return B(),C(I,null,[r(a(S),{title:"\u04AE\u043D\u0434\u0441\u044D\u043D \u0445\u0443\u0443\u0434\u0430\u0441"}),r(k,null,{default:y(()=>[o("div",null,[o("div",F,[o("h2",R,[r(e,{class:"flex font-bold text-black hover:text-gray-800",href:s.route("dashboard")},{default:y(()=>[U,D(" \u041D\u04AF\u04AF\u0440 \u0445\u0443\u0443\u0434\u0430\u0441")]),_:1},8,["href"])])]),r(E),o("div",X,[r(_,{modelValue:a(d).start,"onUpdate:modelValue":t[0]||(t[0]=n=>a(d).start=n),type:"date",label:"\u042D\u0445\u043B\u044D\u0445"},null,8,["modelValue"]),r(_,{modelValue:a(d).end,"onUpdate:modelValue":t[1]||(t[1]=n=>a(d).end=n),type:"date",label:"\u0414\u0443\u0443\u0441\u0430\u0445"},null,8,["modelValue"]),o("span",$,M(a(v)),1),Q]),o("div",T,[o("div",W,[q,r(a(c),{class:"p-4 bg-white",type:"pie",options:a(g).chartOptions,series:a(g).series},null,8,["options","series"])]),o("div",G,[J,r(a(c),{class:"p-4 mb-8 bg-white",type:"bar",height:"350",options:a(u).chartOptions,series:a(u).series},null,8,["options","series"])])]),o("div",K,[o("div",Y,[Z,r(a(c),{class:"p-4 mb-8 bg-white",type:"bar",height:"350",options:a(b).chartOptions,series:a(b).series},null,8,["options","series"])]),o("div",tt,[et,r(a(c),{class:"p-4 bg-white",type:"pie",options:a(m).chartOptions,series:a(m).series},null,8,["options","series"])])]),o("div",st,[o("div",ot,[at,r(a(c),{class:"p-4 mb-8 bg-white",type:"bar",height:"350",options:a(f).chartOptions,series:a(f).series},null,8,["options","series"])]),o("div",rt,[it,r(a(c),{class:"p-4 mb-8 bg-white",type:"bar",height:"350",options:a(x).chartOptions,series:a(x).series},null,8,["options","series"])])])])]),_:1})],64)}}};export{mt as default};
