import{_ as N,d as T,S as z,g as A,e as V}from"./Admin-Blc19dXI.js";import{m as L}from"./mapValues-BADS3yZt.js";import{P as F}from"./useDebouncedRef-B5YvfVa8.js";import{p as O}from"./pickBy-lEDkgeaM.js";import{A as R,S as H}from"./AdminTable-C_eR7vSI.js";import{d as P}from"./debounce-C-FlXP72.js";import{M as E}from"./MySelect-BBpKVIBc.js";import{A as U}from"./AdminCard-Dj6o4HWC.js";import{_ as q}from"./SharedState-BYc8zG8s.js";import{T as B,r as a,c as d,o as i,a as e,b as o,w as r,d as m,n as f,f as G,v as J,F as j,g as K,t as n,j as x,h as Q}from"./app-B9GknoOI.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./icon-512-vKo9cVLo.js";import"./index-bALXmasn.js";import"./Modal-Bm0WLtAA.js";import"./ShowMapPoint-BcXwngFe.js";import"./index-DSlUUo4v.js";const X={name:"pink-tabs",metaInfo:{title:"Registers"},components:{Pagination:F,SearchFilter:H,AdminTable:R,MySelect:E,AdminCard:U,SharedState:q,MenuItems:V,Transition:B,Menu:A,MenuButton:z,MenuItem:T},layout:N,props:{datas:Object,filters:[Object,Array],host:String,auth:[Object,Array]},data(){return{form:{aimag_city_id:null,soum_district_id:null,bag_horoo_id:null,reason_id:null,reg_user_id:null,comf_user_id:null,status_id:null,...this.filters?this.filters:{}},headers:{name:"Байгууллага, аж ахуйн нэгжийн нэр, иргэний овог нэр",register:"Регистрийн дугаар",chiglel:"Үйл ажиллагааны чиглэл","aimag_city.name":"Аймаг,Нийслэл",aimag_city_id:"Аймаг,Нийслэл","soum_district.name":"Сум,Дүүрэг",soum_district_id:"Сум,Дүүрэг","bag_horoo.name":"Баг,Хороо",bag_horoo_id:"Баг,Хороо",address:"Хаяг, байршилд",description:"Гаргасан зөрчлийн байдал","reason.name":"Зөрчлийн төрөл",reason_id:"Зөрчлийн төрөл",zuil_zaalt:"Зөрчсөн хууль тогтоомжийн зүйл, заалт",resolve_desc:"Зөрчлийг шийдвэрлэсэн байдал",long:"Уртраг",lat:"Өргөрөг","reg_user.name":"Бүртгэсэн хүн",reg_user_id:"Бүртгэсэн хүн","comf_user.name":"Шийдвэрлэсэн хүн",comf_user_id:"Шийдвэрлэсэн хүн","status.name":"Төлөв",status_id:"Төлөв"}}},watch:{form:{handler:P(function(){this.$inertia.get(this.route("admin.registers.index"),O(this.form),{preserveState:!0})},150),deep:!0}},computed:{openTab(){return parseInt(this.form.status_id)??2}},methods:{reset(){this.form=L(this.form,()=>null)},calcDateRange(u,t){let l=(isNaN(Date.parse(t))?Date.now():Date.parse(t))-Date.parse(u);return isNaN(l)?"~":Math.ceil(l/(1e3*3600*24))}}},Y={class:"flex justify-between px-4 mt-4 sm:px-8"},Z={class:"flex items-center space-x-1 text-xs"},$={class:"p-4 mt-8 sm:px-8 sm:py-4"},ee={class:"flex flex-wrap"},te={class:"w-full"},se={class:"flex flex-row flex-wrap pt-3 pb-4 mb-0 list-none"},oe={class:"flex-auto mr-2 -mb-px text-center last:mr-0"},re={class:"flex-auto mr-2 -mb-px text-center last:mr-0"},ne={class:"relative flex flex-col w-full min-w-0 mb-6 break-words bg-white rounded shadow-lg"},le={class:"flex-auto px-4 py-5"},ie={class:"tab-content tab-space"},ae={class:"p-4 bg-white rounded"},de={class:"flex justify-between"},ue={class:"relative text-gray-400"},ce={class:"w-full mt-2 text-gray-500"},me={class:"divide-y divide-gray-200"},fe={class:"flex items-center py-4"},xe={class:"px-4"},pe={href:"#",class:"text-gray-600 font-bolder"},ge={class:"text-sm font-bold"},_e={key:0,class:"px-2 py-1 text-xs text-white bg-orange-500 rounded"},he={key:1,class:"px-2 py-1 text-xs text-white bg-green-500 rounded"},we={key:2,class:"px-2 py-1 text-xs text-white bg-blue-500 rounded"},ye={class:"text-right"},be={class:"px-1 py-1"},ve={class:"flex items-center justify-between py-2 border-t border-gray-200"},ke={class:"hidden sm:flex-2 sm:flex sm:items-center sm:justify-between"};function Me(u,t,l,je,c,p){const g=a("ILink"),C=a("MenuButton"),h=a("MenuItem"),I=a("MenuItems"),S=a("Menu"),D=a("pagination");return i(),d(j,null,[e("div",Y,[t[6]||(t[6]=e("h2",{class:"text-xl text-gray-600"},"Зөрчлийн бүртгэл",-1)),e("div",Z,[o(g,{href:"/",class:"text-sm font-bold text-indigo-700"},{default:r(()=>t[3]||(t[3]=[m("Нүүр хуудас",-1)])),_:1,__:[3]}),t[4]||(t[4]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-2 h-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),t[5]||(t[5]=e("span",{class:"text-sm text-gray-600"},"Зөрчлийн бүртгэл",-1))])]),e("div",$,[e("div",ee,[e("div",te,[e("ul",se,[e("li",oe,[e("a",{class:f(["block px-5 py-3 text-xs font-bold leading-normal text-orange-600 uppercase bg-white rounded shadow-lg",{"!text-white !bg-orange-600":p.openTab===2}]),onClick:t[0]||(t[0]=s=>c.form.status_id=2)}," Илгээсэн ",2)]),e("li",re,[e("a",{class:f(["block px-5 py-3 text-xs font-bold leading-normal text-green-600 uppercase bg-white rounded shadow-lg",{"!text-white !bg-green-600":p.openTab===4}]),onClick:t[1]||(t[1]=s=>c.form.status_id=3)}," Шийдвэрлэсэн ",2)])]),e("div",ne,[e("div",le,[e("div",ie,[e("div",null,[e("div",ae,[e("div",de,[e("div",null,[e("div",ue,[t[7]||(t[7]=e("span",{class:"absolute inset-y-0 left-0 flex items-center pl-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),G(e("input",{id:"search",name:"search",type:"search","onUpdate:modelValue":t[2]||(t[2]=s=>c.form.search=s),class:"w-full py-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-md focus:outline-none focus:ring-gray-500 focus:z-10",placeholder:"Бүртгэл хайх"},null,512),[[J,c.form.search]])])])]),e("table",ce,[t[12]||(t[12]=e("thead",{class:"border-b"},[e("tr",null,[e("th",{class:"p-2 text-left text-gray-600"},[e("input",{type:"checkbox",class:"w-5 h-5 text-blue-500 border-gray-300 rounded cursor-pointer focus:ring-0"})]),e("th",{class:"text-left text-gray-600"},"ЗӨРЧЛИЙН МЭДЭЭЛЭЛ"),e("th",{class:"text-left text-gray-600"},"ЗӨРЧЛИЙН ТӨРӨЛ"),e("th",{class:"text-left text-gray-600"},"ХЭРЭГЛЭГЧ"),e("th",{class:"text-left text-gray-600"},"ТӨЛӨВ"),e("th",{class:"text-left text-gray-600"},"ЗАРЦУУЛСАН ХУГАЦАА"),e("th",{class:"text-left text-gray-600"},"БҮРТГЭСЭН ОГНОО"),e("th",{class:"text-right text-gray-600"},"ҮЙЛДЛҮҮД")])],-1)),e("tbody",me,[(i(!0),d(j,null,K(l.datas.data,s=>{var w,y,b,v,k,M;return i(),d("tr",null,[t[11]||(t[11]=e("td",{class:"p-2"},[e("input",{type:"checkbox",class:"w-5 h-5 text-blue-500 border-gray-300 rounded cursor-pointer focus:ring-0"})],-1)),e("td",fe,[e("div",xe,[e("div",null,[e("a",pe,n(s.name),1)]),e("div",ge,n(s.register),1)])]),e("td",null,n(((w=s.reason)==null?void 0:w.name)??""),1),e("td",null,n(s.status_id==2?((y=s.reg_user)==null?void 0:y.name)??"":((b=s.comf_user)==null?void 0:b.name)??""),1),e("td",null,[s.status_id==2?(i(),d("span",_e,n(((v=s.status)==null?void 0:v.name)??"хоосон"),1)):x("",!0),s.status_id==3?(i(),d("span",he,n(((k=s.status)==null?void 0:k.name)??"хоосон"),1)):x("",!0),s.status_id==4?(i(),d("span",we,n(((M=s.status)==null?void 0:M.name)??"хоосон"),1)):x("",!0)]),e("td",null,n(p.calcDateRange(s.reg_at,s.resolved_at))+" хоног",1),e("td",null,n(s.created_at),1),e("td",ye,[o(S,{as:"div",class:"relative inline-block text-left"},{default:r(()=>[e("div",null,[o(C,{class:"inline-flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-gray-500 rounded-md hover:bg-gray-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},{default:r(()=>t[8]||(t[8]=[m(" Үйлдэл ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 ml-2 -mr-1 text-violet-200 hover:text-violet-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),_:1,__:[8]})]),o(B,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:r(()=>[o(I,{class:"absolute right-0 z-50 w-32 mt-1 origin-top-right bg-white divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:r(()=>[e("div",be,[o(h,null,{default:r(({active:_})=>[o(g,{href:u.route("admin.registers.show",s.id),class:f([_?"bg-gray-400 text-white":"text-gray-900","group flex rounded-md items-center w-full px-1 py-2 text-sm"])},{default:r(()=>t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-2 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),m(" Дэлгэрэнгүй ",-1)])),_:2,__:[9]},1032,["href","class"])]),_:2},1024),s.status_id==3||["mha"].includes(l.auth.user.roles)||["da"].includes(l.auth.user.roles)||["admin"].includes(l.auth.user.roles)?(i(),Q(h,{key:0},{default:r(({active:_})=>[o(g,{href:u.route("admin.registers.show_resolve",s.id),class:f([_?"bg-green-400 text-white":"text-gray-900","group flex rounded-md items-center w-full px-1 py-2 text-sm"])},{default:r(()=>t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-2 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),m(" Шийдвэрлэх ",-1)])),_:2,__:[10]},1032,["href","class"])]),_:2},1024)):x("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)])])}),256))])]),e("div",ve,[t[13]||(t[13]=e("div",{class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},null,-1)),e("div",ke,[o(D,{links:l.datas.links},null,8,["links"])])])])])])])])])])])],64)}const Ee=W(X,[["render",Me]]);export{Ee as default};
