import{u as C,au as S,J as h,h as T,e as r,o as d,a as s,b as v,f as c,F as m,i as f,l as g,t as _,k as U,d as B,av as I}from"./app-DGHab_kQ.js";import{_ as N}from"./Admin-H_g-vRXR.js";import{M as y}from"./MyInput-ZVWUQVjV.js";import{d as D}from"./debounce-BGqm79Vt.js";import"./pickBy-CngDaU6t.js";import M from"https://cdn.skypack.dev/file-saver@2.0.5";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./icon-512-vKo9cVLo.js";import"./index-2ky_AOsw.js";const A={class:"m-auto mb-6"},E={class:"p-6 bg-white rounded shadow"},L={class:"flex gap-4 mb-8 border-b"},J={class:"grid justify-between grid-cols-3 gap-x-4"},$=["value"],q={class:""},z={class:"bg-white"},G={class:"table border table-bordered min-w-fit"},H={class:"font-bold"},K={class:"align-text-top"},P=["rowspan"],Q={class:"border"},R={class:"font-bold"},W=["colspan"],X=Object.assign({layout:N},{__name:"Index",props:{datas:Object,filters:[Object,Array],host:String},setup(x){const p=x,b={reason_name:"Зөрчлийн төрөл",ac_name:"Аймаг нийслэл",sd_name:"Сум дүүрэг",bh_name:"Баг хороо",whois:"Хэлбэр",org:"Байгууллага",status_name:"Төлөв",reg_user:"Бүртгэсэн хүн",comf_user:"Шийдвэрлэсэн",resolve_name:"Шийдвэрийн төрөл"},i=C({model:{...p.filters,per_page:p.datas.per_page}}).transform(l=>l.model);S(()=>{});const u=h(()=>[...p.filters.sh_type||[]]),w=h(()=>p.datas.map(l=>+l.niit).reduce((l,e)=>l+e,0)),V=h(()=>k([...p.datas]));function k(l){if(!l.length)return[];const e=l.map(t=>({...t})),o=u.value;for(const t of o){let a=0;for(;a<e.length;){e[a][t+"span"]=1,e[a][t+"dis"]=!1;let n=a+1;for(;n<e.length&&e[a][t]===e[n][t]&&e[a][t]!==void 0&&e[a][t]!=="";)e[a][t+"span"]++,e[n][t+"span"]=1,e[n][t+"dis"]=!0,n++;a=n}}return e}function F(){let l=[],e=[];const o=p.datas;for(const a of u)e.push(b[a]);e.push("niit"),l.push(e.join(","));for(const a of o){let n=[];for(const j of u)n.push('"'+(a[j]??" ")+'"');n.push(a.niit),l.push(n.join(","))}const t=new Blob(["\uFEFF"+l.join(`
`)],{encoding:"UTF-8",type:"text/csv;charset=utf-8;"});M.saveAs(t,"data.csv")}return T(()=>i.model,D(()=>i.get("",{preserveState:!0}),150),{deep:!0}),(l,e)=>(d(),r("div",null,[s("div",A,[s("div",E,[e[5]||(e[5]=s("h1",{class:"mb-8 text-3xl font-bold"},"Тайлан",-1)),s("div",L,[v(y,{modelValue:c(i).model.start_at,"onUpdate:modelValue":e[0]||(e[0]=o=>c(i).model.start_at=o),type:"date",class:"w-40",label:"Эхлэх огноо"},null,8,["modelValue"]),v(y,{modelValue:c(i).model.end_at,"onUpdate:modelValue":e[1]||(e[1]=o=>c(i).model.end_at=o),type:"date",class:"w-40",label:"Дуусах огноо"},null,8,["modelValue"]),s("div",J,[(d(),r(m,null,f(b,(o,t)=>s("label",{key:t},[U(s("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>c(i).model.sh_type=a),value:t},null,8,$),[[I,c(i).model.sh_type]]),B(_(o),1)])),64))]),s("button",{onClick:F,class:"h-8 px-4 text-white bg-orange-500 rounded"},"CSV файл татах")]),s("div",q,[s("div",z,[s("table",G,[s("thead",H,[s("tr",null,[(d(!0),r(m,null,f(u.value,(o,t)=>(d(),r("td",{key:t,class:"px-1 py-2 border"},_(b[o]),1))),128)),e[3]||(e[3]=s("td",{class:"px-1 py-2 border"},"Нийт",-1))])]),s("tbody",K,[(d(!0),r(m,null,f(V.value,o=>(d(),r("tr",{key:o},[(d(!0),r(m,null,f(u.value,t=>(d(),r(m,null,[o[t+"dis"]?g("",!0):(d(),r("td",{key:t,rowspan:o[t+"span"],class:"border"},_(o[t]),9,P))],64))),256)),s("td",Q,_(o.niit),1)]))),128))]),s("tfoot",null,[s("tr",R,[u.value.length>1?(d(),r("td",{key:0,colspan:u.value.length-1},null,8,W)):g("",!0),e[4]||(e[4]=s("td",null,"Нийт",-1)),s("td",null,_(w.value),1)])])])])])])])]))}}),re=O(X,[["__scopeId","data-v-1a11d83f"]]);export{re as default};
