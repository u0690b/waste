import{r as k,c as a,o as s,a as e,p as B,F as y,g as p,t as u,b as g,j as v,n as C,h as x,w as f,d as A,i as S,q as w,f as j,s as I}from"./app-CuN5FWO0.js";import{_ as N}from"./DestroyButton-BUvKxku3.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as $}from"./MySelect-BtVDH4Uf.js";const U={props:{headers:{type:Object,required:!0},datas:{type:Object,required:!0},url:String,showAdd:{type:[Boolean],default:!1}},emits:["orderBy","showAdd","update:showAdd"],setup(r,{emit:l}){const t=(_,d)=>{let o="",n=d.split(".");if(n.length==1)o=_[n[0]];else{let i=_;for(d of n)try{i=i[d]}catch(c){console.info(n,c==null?void 0:c.message)}o=i}return o},m=w({get(){return!!r.showAdd},set(_){l("update:showAdd",_)}}),h="callback="+(new URLSearchParams(window.location.search).get("callback")??encodeURIComponent(location.pathname+location.search));return{parseVal:t,isShow:m,callback:h}},methods:{destroy(r){confirm("Та устгахдаа итгэлтэй байна уу?")&&S.delete(this.url+"/"+r+(this.callback??""))},show(){this.show.values=!this.show.values,this.add}},components:{DestroyButton:N}},q={class:""},F={class:"w-full mt-2 text-gray-500 table-bordered"},z={class:"border-b"},D={class:"text-left"},L=["onClick"],M={class:"w-20 pl-2"},O={class:"pl-2"},T=["src"],P={key:1,class:"items-center"},R={class:"py-1 pl-2 text-center"},E={key:0},G=["colspan"];function H(r,l,t,m,h,_){const d=k("ILink"),o=k("DestroyButton");return s(),a("div",q,[e("table",F,[e("thead",z,[e("tr",D,[l[0]||(l[0]=e("th",{class:"pl-2 w-11"},[e("i",{class:"ti-list"})],-1)),(s(!0),a(y,null,p(t.headers,(n,i)=>(s(),a("th",{key:i,class:"text-gray-600",onClick:c=>r.$emit("orderBy",n.order)},u(n.name),9,L))),128)),e("th",M,[g(d,{href:`${t.url}/create`,class:"btn btn-success ti-plus"},null,8,["href"])])])]),B(r.$slots,"filter"),e("tbody",null,[(s(!0),a(y,null,p(t.datas.data,(n,i)=>(s(),a("tr",{key:n.id,class:"border-t hover:bg-gray-100 focus-within:bg-gray-100"},[e("td",O,u(i+1),1),(s(!0),a(y,null,p(t.headers,(c,V)=>(s(),a("td",{key:V,class:"px-2 py-1"},[c.type=="img"?(s(),a("img",{key:0,src:n[c.key],class:C(c.class)},null,10,T)):(s(),a(y,{key:1},[t.url?(s(),x(d,{key:0,href:t.url+"/"+n.id+"?"+(m.callback??""),class:"items-center focus:text-primary-500"},{default:f(()=>[A(u(m.parseVal(n,c.key)),1)]),_:2},1032,["href"])):(s(),a("span",P,u(m.parseVal(n,c.key)),1))],64))]))),128)),e("td",R,[g(o,{href:t.url+"/"+n.id,title:"устгах",class:"inline-block px-1 py-0"},{default:f(()=>l[1]||(l[1]=[e("i",{class:"ti-trash"},null,-1)])),_:2,__:[1]},1032,["href"]),t.url?(s(),x(d,{key:0,href:t.url+"/"+n.id+"/edit?"+(m.callback??""),class:"inline-block px-2 text-white bg-orange-500 rounded hover:bg-orange-700",title:"Засах"},{default:f(()=>l[2]||(l[2]=[e("i",{class:"ti-pencil-alt"},null,-1)])),_:2,__:[2]},1032,["href"])):v("",!0)])]))),128)),t.datas.data.length===0?(s(),a("tr",E,[e("td",{class:"px-6 py-4",colspan:t.headers.length+2},"Мэдээлэл байхгүй ",8,G)])):v("",!0)])])])}const me=b(U,[["render",H]]),J={class:"search"},K=["onUpdate:modelValue","type"],Q={__name:"AdminTableFilter",props:{headers:{type:Object,required:!0},model:{type:Object,required:!0}},emits:["update:model"],setup(r,{emit:l}){const t=r,m=l,h=w({get:()=>t.model,set:_=>m("update:model",_)});return(_,d)=>(s(),a("thead",null,[e("tr",null,[d[0]||(d[0]=e("td",null,null,-1)),(s(!0),a(y,null,p(r.headers,(o,n)=>(s(),a(y,null,[o.filter!==!0?(s(),a("td",{key:o.name})):(s(),a(y,{key:1},[o.url?(s(),a("td",{key:n},[g($,{modelValue:h.value[o.key],"onUpdate:modelValue":i=>h.value[o.key]=i,class:"min-w-[100px] p-0 text-sm",url:o.url,onChangeId:i=>h.value[o.order]=i},null,8,["modelValue","onUpdate:modelValue","url","onChangeId"])])):(s(),a("td",{key:o.name},[e("div",J,[j(e("input",{"onUpdate:modelValue":i=>h.value[o.key]=i,type:o.type??"search",clearable:"",class:"w-full p-0 text-sm"},null,8,K),[[I,h.value[o.key]]])])]))],64))],64))),256))])]))}},he=b(Q,[["__scopeId","data-v-d129f2e3"]]),W={props:{modelValue:[Number,String],search:[Number,String],total:Number},emits:["update:modelValue","update:search"]},X={class:"flex flex-wrap justify-between gap-4 mb-2"},Y={class:"relative text-gray-400 w-[300px]"},Z=["value"],ee=["value"],te={value:"10"},se={value:"30"},le={value:"50"},ae={value:"100"},oe={value:"500"},ne={value:"1000"};function re(r,l,t,m,h,_){return s(),a("div",X,[e("div",Y,[l[2]||(l[2]=e("span",{class:"absolute inset-y-0 left-0 flex items-center pl-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),e("input",{id:"search",name:"search",type:"search",value:t.search,onInput:l[0]||(l[0]=d=>r.$emit("update:search",d.target.value)),class:"w-full py-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-md focus:outline-none focus:ring-gray-500 focus:z-10",placeholder:"Шалтгаан хайх"},null,40,Z)]),e("select",{value:t.modelValue,onChange:l[1]||(l[1]=d=>r.$emit("update:modelValue",d.target.value)),class:"text-sm text-gray-900 border border-gray-300 rounded-md focus:outline-none focus:ring-gray-500 focus:z-10"},[e("option",te,"10/"+u(t.total),1),e("option",se,"30/"+u(t.total),1),e("option",le,"50/"+u(t.total),1),e("option",ae,"100/"+u(t.total),1),e("option",oe,"500/"+u(t.total),1),e("option",ne,"1000/"+u(t.total),1)],40,ee)])}const _e=b(W,[["render",re]]),ye=(r,l)=>{r.model.orderBy=l,r.model.dir=r.model.dir=="desc"?"asc":"desc"};export{me as A,_e as P,he as a,ye as o};
