import{_ as N,d as z,S as A,g as V,e as F}from"./Admin-CUPXhku5.js";import{m as L}from"./mapValues-tdHTAfgF.js";import{P as O}from"./useDebouncedRef-Bkzxg0x1.js";import{p as R}from"./pickBy-RZ_CIFXr.js";import{A as P,S as q}from"./AdminTable-O3lwPv_y.js";import{d as E}from"./debounce-BOY4wkUO.js";import{M as U}from"./MySelect-D6q42Ov3.js";import{A as G}from"./AdminCard-Dji_Fk6B.js";import{_ as H}from"./SharedState-BIU3PV1a.js";import{T as C,r as d,e as u,o as i,a as t,b as r,w as o,d as x,q as m,k as J,v as K,F as j,i as Q,t as l,l as p,c as B}from"./app-CARJDBxm.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./icon-512-vKo9cVLo.js";import"./index-CP857yun.js";import"./Modal-BTZHWyIC.js";import"./ShowMapPoint-Du9QkkaO.js";import"./index-B5JNWE8S.js";const X={name:"pink-tabs",metaInfo:{title:"Registers"},components:{Pagination:O,SearchFilter:q,AdminTable:P,MySelect:U,AdminCard:G,SharedState:H,MenuItems:F,Transition:C,Menu:V,MenuButton:A,MenuItem:z},layout:N,props:{datas:Object,filters:[Object,Array],host:String,auth:[Object,Array]},data(){return{form:{aimag_city_id:null,soum_district_id:null,bag_horoo_id:null,reason_id:null,reg_user_id:null,comf_user_id:null,status_id:null,...this.filters?this.filters:{}},headers:{name:"Байгууллага, аж ахуйн нэгжийн нэр, иргэний овог нэр",register:"Регистрийн дугаар",chiglel:"Үйл ажиллагааны чиглэл","aimag_city.name":"Аймаг,Нийслэл",aimag_city_id:"Аймаг,Нийслэл","soum_district.name":"Сум,Дүүрэг",soum_district_id:"Сум,Дүүрэг","bag_horoo.name":"Баг,Хороо",bag_horoo_id:"Баг,Хороо",address:"Хаяг, байршилд",description:"Гаргасан зөрчлийн байдал","reason.name":"Зөрчлийн төрөл",reason_id:"Зөрчлийн төрөл",zuil_zaalt:"Зөрчсөн хууль тогтоомжийн зүйл, заалт",resolve_desc:"Зөрчлийг шийдвэрлэсэн байдал",long:"Уртраг",lat:"Өргөрөг","reg_user.name":"Бүртгэсэн хүн",reg_user_id:"Бүртгэсэн хүн","comf_user.name":"Шийдвэрлэсэн хүн",comf_user_id:"Шийдвэрлэсэн хүн","status.name":"Төлөв",status_id:"Төлөв"}}},watch:{form:{handler:E(function(){this.$inertia.get(this.route("admin.registers.index"),R(this.form),{preserveState:!0})},150),deep:!0}},computed:{openTab(){return parseInt(this.form.status_id)??2}},methods:{reset(){this.form=L(this.form,()=>null)},calcDateRange(a,e){let n=isNaN(Date.parse(e))?Date.parse(new Date().toString())-Date.parse(a):Date.parse(e)-Date.parse(a);return(isNaN(n)?"~":Math.ceil(n/(1e3*3600*24)))+" хоног"}}},Y={class:"flex justify-between px-4 mt-4 sm:px-8"},Z={class:"flex items-center space-x-1 text-xs"},$={class:"p-4 mt-8 sm:px-8 sm:py-4"},tt={class:"flex flex-wrap"},et={class:"w-full"},st={class:"flex flex-row flex-wrap pt-3 pb-4 mb-0 list-none"},ot={class:"flex-auto mr-2 -mb-px text-center last:mr-0"},rt={class:"-mb-px mr-2 last:mr-0 flex-auto text-center"},lt={class:"flex-auto mr-2 -mb-px text-center last:mr-0"},nt={class:"relative flex flex-col w-full min-w-0 mb-6 break-words bg-white rounded shadow-lg"},it={class:"flex-auto px-4 py-5"},at={class:"tab-content tab-space"},dt={class:"p-4 bg-white rounded"},ut={class:"flex justify-between"},mt={class:"relative text-gray-400"},ct={class:"w-full mt-2 text-gray-500"},ft={class:"divide-y divide-gray-200"},xt={class:"flex items-center py-4"},pt={class:"px-4"},gt={href:"#",class:"text-gray-600 font-bolder"},_t={class:"text-sm font-bold"},ht={key:0,class:"px-2 py-1 text-xs text-white bg-orange-500 rounded"},bt={key:1,class:"px-2 py-1 text-xs text-white bg-green-500 rounded"},yt={key:2,class:"px-2 py-1 text-xs text-white bg-blue-500 rounded"},wt={class:"text-right"},vt={class:"px-1 py-1"},kt={class:"flex items-center justify-between py-2 border-t border-gray-200"},Mt={class:"hidden sm:flex-2 sm:flex sm:items-center sm:justify-between"};function jt(a,e,n,Bt,c,g){const _=d("ILink"),I=d("MenuButton"),h=d("MenuItem"),S=d("MenuItems"),D=d("Menu"),T=d("pagination");return i(),u(j,null,[t("div",Y,[e[7]||(e[7]=t("h2",{class:"text-xl text-gray-600"},"Зөрчлийн бүртгэл",-1)),t("div",Z,[r(_,{href:"/",class:"text-sm font-bold text-indigo-700"},{default:o(()=>e[4]||(e[4]=[x("Нүүр хуудас",-1)])),_:1,__:[4]}),e[5]||(e[5]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-2 h-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e[6]||(e[6]=t("span",{class:"text-sm text-gray-600"},"Зөрчлийн бүртгэл",-1))])]),t("div",$,[t("div",tt,[t("div",et,[t("ul",st,[t("li",ot,[t("a",{class:m(["block px-5 py-3 text-xs font-bold leading-normal text-orange-600 uppercase bg-white rounded shadow-lg",{"!text-white !bg-orange-600":g.openTab===2}]),onClick:e[0]||(e[0]=s=>c.form.status_id=2)}," Илгээсэн ",2)]),t("li",rt,[t("a",{class:m(["text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal text-blue-600 bg-white",{"!text-white bg-blue-600":g.openTab===3}]),onClick:e[1]||(e[1]=s=>c.form.status_id=3)}," Хуваарилсан ",2)]),t("li",lt,[t("a",{class:m(["block px-5 py-3 text-xs font-bold leading-normal text-green-600 uppercase bg-white rounded shadow-lg",{"!text-white !bg-green-600":g.openTab===4}]),onClick:e[2]||(e[2]=s=>c.form.status_id=4)}," Шийдвэрлэсэн ",2)])]),t("div",nt,[t("div",it,[t("div",at,[t("div",null,[t("div",dt,[t("div",ut,[t("div",null,[t("div",mt,[e[8]||(e[8]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),J(t("input",{id:"search",name:"search",type:"search","onUpdate:modelValue":e[3]||(e[3]=s=>c.form.search=s),class:"w-full py-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-md focus:outline-none focus:ring-gray-500 focus:z-10",placeholder:"Бүртгэл хайх"},null,512),[[K,c.form.search]])])])]),t("table",ct,[e[14]||(e[14]=t("thead",{class:"border-b"},[t("tr",null,[t("th",{class:"p-2 text-left text-gray-600"},[t("input",{type:"checkbox",class:"w-5 h-5 text-blue-500 border-gray-300 rounded cursor-pointer focus:ring-0"})]),t("th",{class:"text-left text-gray-600"},"ЗӨРЧЛИЙН МЭДЭЭЛЭЛ"),t("th",{class:"text-left text-gray-600"},"ЗӨРЧЛИЙН ТӨРӨЛ"),t("th",{class:"text-left text-gray-600"},"ХЭРЭГЛЭГЧ"),t("th",{class:"text-left text-gray-600"},"ТӨЛӨВ"),t("th",{class:"text-left text-gray-600"},"ЗАРЦУУЛСАН ХУГАЦАА"),t("th",{class:"text-left text-gray-600"},"БҮРТГЭСЭН ОГНОО"),t("th",{class:"text-right text-gray-600"},"ҮЙЛДЛҮҮД")])],-1)),t("tbody",ft,[(i(!0),u(j,null,Q(n.datas.data,s=>{var b,y,w,v,k,M;return i(),u("tr",null,[e[13]||(e[13]=t("td",{class:"p-2"},[t("input",{type:"checkbox",class:"w-5 h-5 text-blue-500 border-gray-300 rounded cursor-pointer focus:ring-0"})],-1)),t("td",xt,[t("div",pt,[t("div",null,[t("a",gt,l(s.name),1)]),t("div",_t,l(s.register),1)])]),t("td",null,l(((b=s.reason)==null?void 0:b.name)??""),1),t("td",null,l(s.status_id==2?((y=s.reg_user)==null?void 0:y.name)??"":((w=s.comf_user)==null?void 0:w.name)??""),1),t("td",null,[s.status_id==2?(i(),u("span",ht,l(((v=s.status)==null?void 0:v.name)??"хоосон"),1)):p("",!0),s.status_id==3?(i(),u("span",bt,l(((k=s.status)==null?void 0:k.name)??"хоосон"),1)):p("",!0),s.status_id==4?(i(),u("span",yt,l(((M=s.status)==null?void 0:M.name)??"хоосон"),1)):p("",!0)]),t("td",null,l(g.calcDateRange(s.reg_at,s.resolved_at)),1),t("td",null,l(s.created_at),1),t("td",wt,[r(D,{as:"div",class:"relative inline-block text-left"},{default:o(()=>[t("div",null,[r(I,{class:"inline-flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-gray-500 rounded-md hover:bg-gray-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},{default:o(()=>e[9]||(e[9]=[x(" Үйлдэл ",-1),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 ml-2 -mr-1 text-violet-200 hover:text-violet-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),_:1,__:[9]})]),r(C,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:o(()=>[r(S,{class:"absolute right-0 z-50 w-32 mt-1 origin-top-right bg-white divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:o(()=>[t("div",vt,[r(h,null,{default:o(({active:f})=>[r(_,{href:a.route("admin.registers.show",s.id),class:m([f?"bg-gray-400 text-white":"text-gray-900","group flex rounded-md items-center w-full px-1 py-2 text-sm"])},{default:o(()=>e[10]||(e[10]=[t("i",{class:"ti ti-book text-gray-500 font-bold mr-2"},null,-1),x(" Дэлгэрэнгүй ",-1)])),_:2,__:[10]},1032,["href","class"])]),_:2},1024),s.status_id!=4&&n.auth.user.roles=="da"?(i(),B(h,{key:0},{default:o(({active:f})=>[r(_,{href:a.route("admin.register.allocation",s.id),class:m([f?"bg-blue-400 text-white":"text-gray-900","group flex rounded-md items-center w-full px-1 py-2 text-sm"])},{default:o(()=>e[11]||(e[11]=[t("i",{class:"ti ti-direction-alt text-gray-500 font-bold mr-2"},null,-1),x(" Хуваарилах ",-1)])),_:2,__:[11]},1032,["href","class"])]),_:2},1024)):p("",!0),s.status_id==4||["da"].includes(n.auth.user.roles)||["admin"].includes(n.auth.user.roles)?(i(),B(h,{key:1},{default:o(({active:f})=>[r(_,{href:a.route("admin.registers.show_resolve",s.id),class:m([f?"bg-green-400 text-white":"text-gray-900","group flex rounded-md items-center w-full px-1 py-2 text-sm"])},{default:o(()=>e[12]||(e[12]=[t("i",{class:"ti ti-stamp text-gray-500 font-bold mr-2"},null,-1),x(" Шийдвэрлэх ",-1)])),_:2,__:[12]},1032,["href","class"])]),_:2},1024)):p("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)])])}),256))])]),t("div",kt,[e[15]||(e[15]=t("div",{class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},null,-1)),t("div",Mt,[r(T,{links:n.datas.links},null,8,["links"])])])])])])])])])])])],64)}const Ut=W(X,[["render",jt]]);export{Ut as default};
