import{_ as g}from"./Admin.e0746f2f.js";import{M as v}from"./MyInput.8bae33cd.js";import{d as x}from"./debounce.8d18204c.js";import{p as w}from"./pickBy.1c63e4aa.js";import"https://cdn.skypack.dev/file-saver@2.0.5";import{r as V,o as l,c as d,a as o,b as f,F as _,k as h,h as b,t as u,L as I,a4 as S,e as F,Z as j,_ as C}from"./app.02386b88.js";import{_ as T}from"./_plugin-vue_export-helper.cdc0426e.js";const B={metaInfo:{title:"Documents"},components:{MyInput:v},layout:g,props:{datas:Object,filters:[Object,Array],host:String},data(){var e;return{form:{sh_type:[],...(e=this.filters)!=null?e:{}},types:{reason_name:"\u0417\u04E9\u0440\u0447\u043B\u0438\u0439\u043D \u0442\u04E9\u0440\u04E9\u043B",ac_name:"\u0410\u0439\u043C\u0430\u0433 \u043D\u0438\u0439\u0441\u043B\u044D\u043B",sd_name:"\u0421\u0443\u043C \u0434\u04AF\u04AF\u0440\u044D\u0433",bh_name:"\u0411\u0430\u0433 \u0445\u043E\u0440\u043E\u043E",whois:"\u0425\u044D\u043B\u0431\u044D\u0440",org:"\u0411\u0430\u0439\u0433\u0443\u0443\u043B\u043B\u0430\u0433\u0430",status_name:"\u0422\u04E9\u043B\u04E9\u0432",reg_user:"\u0411\u04AF\u0440\u0442\u0433\u044D\u0441\u044D\u043D \u0445\u04AF\u043D",comf_user:"\u0428\u0438\u0439\u0434\u0432\u044D\u0440\u043B\u044D\u0441\u044D\u043D, \u0425\u0443\u0432\u0430\u0430\u0440\u0438\u043B\u0430\u0433\u0434\u0441\u0430\u043D",resolve_name:"\u0428\u0438\u0439\u0434\u0432\u044D\u0440\u0438\u0439\u043D \u0442\u04E9\u0440\u04E9\u043B"}}},computed:{grantTotal(){return this.datas.map(e=>+e.niit).reduce((e,t)=>e+t,0)},tableData(){return this.combineCell(this.datas)}},watch:{form:{handler:x(function(){this.$inertia.get(this.route("admin.tailan"),w(this.form),{preserveState:!0})},150),deep:!0}},methods:{getSpan(e,t){let a=0,r=this.datas[e][t];for(let s=e;s<this.datas.length;s++)if(r==this.datas[s][t])a++;else return a},combineCell(e){for(let r in e[0])for(var t=0;t<e.length;){e[t][r+"span"]=1,e[t][r+"dis"]=!1;for(var a=t+1;a<=e.length-1&&(e[t][r]==e[a][r]&&e[t][r]!="");a++)e[t][r+"span"]++,e[t][r+"dis"]=!1,e[a][r+"span"]=1,e[a][r+"dis"]=!0;t=a}return e},save(){var s;let e=[],t=[];const a=this.datas;for(const i of this.filters.sh_type)t.push(this.types[i]);t.push("niit"),e.push(t.join(","));for(const i of a){let p=[];for(const n of this.filters.sh_type)p.push('"'+((s=i[n])!=null?s:" ")+'"');p.push(i.niit),e.push(p.join(","))}const r=new Blob(["\uFEFF"+e.join(`
`)],{encoding:"UTF-8",type:"text/csv;charset=utf-8;"});saveAs(r,"data.csv")}}},m=e=>(j("data-v-60acf2f1"),e=e(),C(),e),D={class:"m-auto mb-6"},M={class:"bg-white rounded shadow p-6"},k=m(()=>o("h1",{class:"mb-8 text-3xl font-bold"},"\u0422\u0430\u0439\u043B\u0430\u043D",-1)),N={class:"flex gap-4 mb-8 border-b"},U={class:"grid grid-cols-2 gap-x-4 justify-between"},A=["value"],E={class:""},L={class:"bg-white"},O={class:"table table-bordered border min-w-fit"},Z={class:"font-bold"},q=m(()=>o("td",{class:"px-1 py-2 border"},"\u041D\u0438\u0439\u0442",-1)),z={class:"align-text-top"},G=["rowspan"],H={class:"border"},J={class:"font-bold"},K=["colspan"],P=m(()=>o("td",null,"\u041D\u0438\u0439\u0442",-1));function Q(e,t,a,r,s,i){const p=V("MyInput");return l(),d("div",null,[o("div",D,[o("div",M,[k,o("div",N,[f(p,{modelValue:s.form.start_at,"onUpdate:modelValue":t[0]||(t[0]=n=>s.form.start_at=n),type:"date",class:"w-40",label:"\u042D\u0445\u043B\u044D\u0445 \u043E\u0433\u043D\u043E\u043E"},null,8,["modelValue"]),f(p,{modelValue:s.form.end_at,"onUpdate:modelValue":t[1]||(t[1]=n=>s.form.end_at=n),type:"date",class:"w-40",label:"\u0414\u0443\u0443\u0441\u0430\u0445 \u043E\u0433\u043D\u043E\u043E"},null,8,["modelValue"]),o("div",U,[(l(!0),d(_,null,h(s.types,(n,c)=>(l(),d("label",{key:c},[I(o("input",{"onUpdate:modelValue":t[2]||(t[2]=y=>s.form.sh_type=y),type:"checkbox",value:c},null,8,A),[[S,s.form.sh_type]]),F(" "+u(n),1)]))),128))]),o("button",{onClick:t[3]||(t[3]=(...n)=>i.save&&i.save(...n)),class:"rounded bg-orange-500 h-8 px-4 text-white"},"CSV \u0444\u0430\u0439\u043B \u0442\u0430\u0442\u0430\u0445")]),o("div",E,[o("div",L,[o("table",O,[o("thead",Z,[o("tr",null,[(l(!0),d(_,null,h(s.form.sh_type,(n,c)=>(l(),d("td",{key:c,class:"px-1 border py-2"},u(s.types[n]),1))),128)),q])]),o("tbody",z,[(l(!0),d(_,null,h(i.tableData,n=>(l(),d("tr",{key:n},[(l(!0),d(_,null,h(s.form.sh_type,c=>(l(),d(_,null,[n[c+"dis"]?b("",!0):(l(),d("td",{key:c,rowspan:n[c+"span"],class:"border"},u(n[c]),9,G))],64))),256)),o("td",H,u(n.niit),1)]))),128))]),o("tfoot",null,[o("tr",J,[s.form.sh_type.length>1?(l(),d("td",{key:0,colspan:s.form.sh_type.length-1},null,8,K)):b("",!0),P,o("td",null,u(i.grantTotal),1)])])])])])])])])}const se=T(B,[["render",Q],["__scopeId","data-v-60acf2f1"]]);export{se as default};
