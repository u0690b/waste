import{M as y}from"./MyInput-j_KuZLzo.js";import{_ as k}from"./Admin-BLpyamjN.js";import{at as V,l as j,i as A,q as d,r as B,c as I,o as C,b as a,k as r,av as L,w as v,a as o,d as S,t as D,F as M}from"./app-C1PK1slr.js";import{d as N}from"./debounce-C93t8mDT.js";import"./mapValues-BtXAi-XG.js";import{p as z}from"./pickBy-BHy1ZBuc.js";import{V as p}from"./vue3-apexcharts.common-BU6x8NeP.js";import{_ as E}from"./SharedState-CtKeqK-j.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CyiJiHID.js";const P="/build/assets/Play_Store-KcwKuBNk.svg",R="/build/assets/pwa-TfvORtgy.png",F={class:"flex justify-between px-4 mt-4 sm:px-8"},K={class:"text-xl text-gray-600"},T={class:"flex items-center gap-2 py-6 ml-12"},U={class:"pt-6"},X={class:"grid grid-cols-1 gap-4 px-4 mt-8 sm:grid-cols-3 sm:px-8"},$={class:"px-4 py-2 bg-white border rounded-md shadow"},q={class:"col-span-2 px-4 py-2 bg-white border rounded-md shadow"},H={class:"grid grid-cols-1 gap-4 px-4 mt-8 sm:grid-cols-3 sm:px-8"},W={class:"col-span-2 px-4 py-2 bg-white border rounded-md shadow"},G={class:"px-4 py-2 bg-white border rounded-md shadow"},J={class:"grid grid-cols-2"},Q={class:"px-4 py-2 mx-4 mt-8 bg-white border rounded-md shadow sm:mx-8"},Y={class:"px-4 py-2 mx-4 mt-8 bg-white border rounded-md shadow sm:mx-8"},dt={__name:"Dashboard",props:{datas:Object,chart:[Array],etgeed:[Array],irgen:[Array],filters:[Object,Array],host:String},setup(w){const i=w;let l=V({...i.filters});j(()=>l,N(function(){A.get("/dashboard",z(l),{preserveState:!0})},150),{deep:!0});const h=d(()=>{const s=i.chart.reduce((t,e)=>(t.includes(e.ognoo)||t.push(e.ognoo),t),[]);return{series:i.chart.reduce(function(t,e){let n=t.findIndex(c=>c.name==e.reason);if(n<0){let c={name:e.reason,data:s.map(O=>({x:O,y:0}))};n=t.length,t.push(c)}let u=t[n].data.findIndex(c=>c.x==e.ognoo);return u<0?t[n].data.push({x:e.ognoo,y:e.niit}):t[n].data[u].y=t[n].data[u].y+e.niit,t},[]),chartOptions:{chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{},yaxis:{title:{text:"Нийт"}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return"Нийт: "+t}}}}}}),m=d(()=>{const s=i.chart.reduce(function(t,e){return t[e.region]=t[e.region]||0,t[e.region]=t[e.region]+e.niit,t},{});return{chartOptions:{xaxis:{categories:Object.keys(s)}},series:[{name:"series-1",data:Object.values(s)}]}}),b=d(()=>{const s=i.chart.reduce(function(t,e){return t[e.org]=t[e.org]||0,t[e.org]=t[e.org]+e.niit,t},{});return{series:Object.values(s),chartOptions:{chart:{type:"donut"},labels:Object.keys(s),legend:{position:"top"}}}}),g=d(()=>{const s=i.chart.reduce(function(t,e){return t[e.stat]=t[e.stat]||0,t[e.stat]=t[e.stat]+e.niit,t},{});return{series:Object.values(s),chartOptions:{chart:{type:"donut"},labels:Object.keys(s),plotOptions:{legend:{position:"top"}},responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"left"}}}],legend:{position:"top"}}}}),f=d(()=>({chartOptions:{chart:{type:"bar"},xaxis:{categories:i.etgeed.map(s=>s.name)},yaxis:{labels:{show:!1}},plotOptions:{bar:{borderRadius:4,distributed:!0,horizontal:!0}},dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(s,t){return t.w.globals.labels[t.dataPointIndex]+":  "+s},offsetX:0,dropShadow:{enabled:!0}},colors:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B","#2b908f","#f9a3a4","#90ee7e","#f48024","#69d2e7"]},series:[{data:i.etgeed.map(s=>s.niit)}]})),x=d(()=>({chartOptions:{chart:{type:"bar"},xaxis:{categories:i.irgen.map(s=>s.name)},yaxis:{labels:{show:!1}},plotOptions:{bar:{borderRadius:4,distributed:!0,horizontal:!0}},dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(s,t){return t.w.globals.labels[t.dataPointIndex]+":  "+s},offsetX:0,dropShadow:{enabled:!0}},colors:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B","#2b908f","#f9a3a4","#90ee7e","#f48024","#69d2e7"]},series:[{data:i.irgen.map(s=>s.niit)}]})),_=d(()=>{let s=Date.parse(l.end)-Date.parse(l.start);return(isNaN(s)?"~":Math.ceil(s/(1e3*3600*24)))+" өдрийн мэдээ"});return(s,t)=>{const e=B("ILink");return C(),I(M,null,[a(r(L),{title:"Үндсэн хуудас"}),a(k,null,{default:v(()=>[o("div",null,[o("div",F,[o("h2",K,[a(e,{class:"flex font-bold text-black hover:text-gray-800",href:s.route("dashboard")},{default:v(()=>t[2]||(t[2]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})],-1),S(" Нүүр хуудас ",-1)])),_:1,__:[2]},8,["href"])])]),a(E),o("div",T,[a(y,{modelValue:r(l).start,"onUpdate:modelValue":t[0]||(t[0]=n=>r(l).start=n),type:"date",label:"Эхлэх"},null,8,["modelValue"]),a(y,{modelValue:r(l).end,"onUpdate:modelValue":t[1]||(t[1]=n=>r(l).end=n),type:"date",label:"Дуусах"},null,8,["modelValue"]),o("span",U,D(_.value),1),t[3]||(t[3]=o("div",{class:"flex justify-end flex-1 w-full gap-4 mr-8 fade-in"},[o("a",{href:"https://waste.mecc.gov.mn/waste.apk",target:"_blank"},[o("img",{src:P,class:"h-12 bounce-top-icons"})]),o("a",{href:"https://waste.mecc.gov.mn/mobile",target:"_blank"},[o("img",{src:R,class:"h-12 bounce-top-icons"})])],-1))]),o("div",X,[o("div",$,[t[4]||(t[4]=o("h3",{class:"mb-4 text-xl text-gray-600"},"Нийт зөрчил төлөв",-1)),a(r(p),{class:"p-4 bg-white",type:"pie",options:g.value.chartOptions,series:g.value.series},null,8,["options","series"])]),o("div",q,[t[5]||(t[5]=o("h3",{class:"mb-4 text-xl text-gray-600"},"Зөрчлийн төрлөөр",-1)),a(r(p),{class:"p-4 mb-8 bg-white",type:"bar",height:"350",options:h.value.chartOptions,series:h.value.series},null,8,["options","series"])])]),o("div",H,[o("div",W,[t[6]||(t[6]=o("h3",{class:"mb-4 text-xl text-gray-600"},"Харьяалагдах нутаг дэвсгэрээр",-1)),a(r(p),{class:"p-4 mb-8 bg-white",type:"bar",height:"350",options:m.value.chartOptions,series:m.value.series},null,8,["options","series"])]),o("div",G,[t[7]||(t[7]=o("h3",{class:"mb-4 text-xl text-gray-600"},"Зөрчил хуваарилалтаар",-1)),a(r(p),{class:"p-4 bg-white",type:"pie",options:b.value.chartOptions,series:b.value.series},null,8,["options","series"])])]),o("div",J,[o("div",Q,[t[8]||(t[8]=o("h3",{class:"mb-4 text-xl text-gray-600"},"Олон зөрчил гаргасан аж ахуйн нэгжүүд",-1)),a(r(p),{class:"p-4 mb-8 bg-white",type:"bar",height:"350",options:f.value.chartOptions,series:f.value.series},null,8,["options","series"])]),o("div",Y,[t[9]||(t[9]=o("h3",{class:"mb-4 text-xl text-gray-600"},"Олон зөрчил гаргасан иргэд",-1)),a(r(p),{class:"p-4 mb-8 bg-white",type:"bar",height:"350",options:x.value.chartOptions,series:x.value.series},null,8,["options","series"])])])])]),_:1})],64)}}};export{dt as default};
