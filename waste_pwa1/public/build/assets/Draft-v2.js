import{_ as y}from"./Card-v2.js";import{b,a as x}from"./Button-v2.js";import{_ as L}from"./WasteDetail.vue_vue_type_script_setup_true_lang-v2.js";import{u as S}from"./WasteStore-v2.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-v2.js";import{d as $,y as C,c,k as u,o,b as r,u as l,h as N,w as p,e as t,l as F,F as f,f as U,t as m,a2 as D}from"./app-v2.js";import{b as V}from"./index-v2.js";import{_ as E}from"./Heading.vue_vue_type_script_setup_true_lang-v2.js";import"./Carousel.vue_vue_type_script_setup_true_lang-v2.js";import"./App-v22.js";import"./useForwardExpose-v2.js";import"./index-v22.js";const J={class:"mt-8 px-2 grid gap-2"},O={key:0,class:"text-center"},j={class:"flex items-center justify-between gap-2"},A={class:"flex-1 pl-2"},I={class:"text-muted text-xs truncate overflow-hidden text-pretty w-full hyphens-auto"},ee=$({__name:"Draft",setup(P){const h=[{title:"Дашбоард",href:"/"},{title:"Илгээгээгүй",href:"/draft"}],i=S(),s=C(),g=()=>{i.wasteList=i.wasteList.filter(e=>JSON.stringify(e)!==JSON.stringify(s.value)),s.value=void 0},d=()=>{const e={...s.value};e.images=[],e.imageBase64List?.forEach((_,n)=>{(e.images??=[]).push(V(_,`img${n}.png`))}),delete e.imageBase64List,D.post("/store",{_method:"put",...e},{forceFormData:!0,headers:{back:new URLSearchParams(window.location.search).get("callback")??""},preserveScroll:!0,replace:!0,onSuccess:()=>{g(),console.log("succes")}})};return(e,_)=>{const n=b,v=x,w=y;return s.value==null?(o(),c(f,{key:0},[r(l(N),{title:"Дашбоард"}),r(B,{breadcrumbs:h},{default:p(()=>[t("div",J,[l(i).wasteList.length==0?(o(),c("div",O,[r(E,{title:"Харуулах мэдээлэл алга",description:"Та шинээр бүртгүүлэх боломжтой"})])):F("",!0),(o(!0),c(f,null,U(l(i).wasteList,(a,k)=>(o(),u(w,{key:k+"hehe",onClick:R=>s.value=a,class:"hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300"},{default:p(()=>[t("div",j,[r(n,{src:a.imageBase64List?.[0]??void 0,class:""},null,8,["src"]),t("div",A,[t("p",null,m(a.name),1),t("div",I,[t("p",null,m(a.address),1),t("p",null,m(a.description),1)])]),r(v,{onClick:d,title:"Сервэрт илгээх",icon:"i-lucide-rocket",color:"success",variant:"subtle",ui:{leadingIcon:"text-primary"}})])]),_:2},1032,["onClick"]))),128))])]),_:1})],64)):(o(),u(L,{key:1,waste:s.value,islocal:"",onSend:d},null,8,["waste"]))}}});export{ee as default};
